(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{78727:function(e,t,n){"use strict";n.d(t,{DB:function(){return i}});var s=n(39001);let RevisionDB=class RevisionDB extends s.ZP{constructor(){super("revision"),this.version(2).stores({dictionary:"++id, value",suggestion:"++id, category, type, date"})}};let i=new RevisionDB},4236:function(e,t,n){"use strict";n.d(t,{Ng:function(){return i},kg:function(){return logger},sz:function(){return s}});let s={BIAS:{FETCHING:"TIPTAP/BIAS/FETCHING",RESULT:"TIPTAP/BIAS/RESULT",MATCH:"TIPTAP/BIAS/MATCH"},LANGUAGE:{FETCHING:"TIPTAP/LANGUAGE/FETCHING",RESULT:"TIPTAP/LANGUAGE/RESULT",MATCH:"TIPTAP/LANGUAGE/MATCH"}},i={ANALYTICS:{BIAS:{FETCHED:"FIREBASE/ANALYTICS/BIAS/FETCHED",CREATED:"FIREBASE/ANALYTICS/BIAS/CREATED",UPDATED:"FIREBASE/ANALYTICS/BIAS/UPDATED",ERROR:"FIREBASE/ANALYTICS/BIAS/ERROR"}},AUTH:{CLEVER:{LOGIN_POPUP:"FIREBASE/CLEVER/LOGIN_POPUP"}}};function logger(e,t){console.log(e,t)}},82834:function(e,t,n){"use strict";n.d(t,{DU:function(){return u},Kp:function(){return l},Te:function(){return r},WA:function(){return o},ii:function(){return i},kk:function(){return d},mk:function(){return a},rD:function(){return c}});var s=n(80342);let i=(0,s.cn)({key:"root",default:{route:"/",menuOpen:!1,loading:!1,spellingCount:0,biasCount:0,fetchingTone:!1,fetchingLanguage:!1,fetchingBias:!1,fetchingRevision:!1,acceptedTerms:!1,spellCheck:!0}}),a=(0,s.nZ)({key:"root.routeState",get:e=>{let{get:t}=e;return t(i).route}}),r=(0,s.nZ)({key:"root.menuState",get:e=>{let{get:t}=e;return t(i).menuOpen}});(0,s.nZ)({key:"root.loadingState",get:e=>{let{get:t}=e;return t(i).loading}});let o=(0,s.nZ)({key:"root.spellingCount",get:e=>{let{get:t}=e;return t(i).spellingCount}}),l=(0,s.nZ)({key:"root.biasCount",get:e=>{let{get:t}=e;return t(i).biasCount}});(0,s.nZ)({key:"root.fetchingToneState",get:e=>{let{get:t}=e;return t(i).fetchingTone}});let c=(0,s.nZ)({key:"root.fetchingLanguageState",get:e=>{let{get:t}=e;return t(i).fetchingLanguage}}),u=(0,s.nZ)({key:"root.fetchingBiasState",get:e=>{let{get:t}=e;return t(i).fetchingBias}}),d=(0,s.nZ)({key:"root.fetchingRevisionState",get:e=>{let{get:t}=e;return t(i).fetchingRevision}});(0,s.nZ)({key:"root.termsState",get:e=>{let{get:t}=e;return t(i).acceptedTerms}}),(0,s.nZ)({key:"root.spellCheckState",get:e=>{let{get:t}=e;return t(i).spellCheck}})},22135:function(e,t,n){"use strict";n.d(t,{$$:function(){return r},at:function(){return o},$8:function(){return getSetting},PR:function(){return s.PR},PO:function(){return upsertSetting},kK:function(){return upsertSuggestion},kX:function(){return s.kX}});var s=n(77e3),i=n(10618),a=n(6104);let r={ethnicity:[],gender:[],language:[],religion:[],disability:[],housing:[]},o={formatting:!0};async function getSetting(e){try{let t=(0,i.JU)(a.RZ,"settings",e),n=await (0,i.QT)(t);return n.data()}catch(e){return console.error(e),null}}async function upsertSetting(e,t){try{let n=(0,i.JU)(a.RZ,"settings",e),s={...(0,i.QT)(n),...t};await (0,i.pl)(n,s),console.log("Updated Settings: ".concat(e),s)}catch(t){console.error("Error Updating Settings: ".concat(e),t)}}async function upsertSuggestion(e){var t;if(null===(t=a.I8.currentUser)||void 0===t?void 0:t.uid){e.userId=a.I8.currentUser.uid;try{let t=(0,i.hJ)(a.RZ,"suggestions");await (0,i.ET)(t,e),console.log("Created Suggestion: ".concat(a.I8.currentUser.uid),e)}catch(e){console.error("Error Creating Suggestion: ".concat(a.I8.currentUser.uid),e)}}}},77e3:function(e,t,n){"use strict";n.d(t,{PR:function(){return getUser},h8:function(){return deleteUser},kX:function(){return upsertUser}});var s=n(10618),i=n(6104);let a={uid:"",acceptedTerms:!1,admin:!1,displayName:null,email:null,photoUrl:null,phoneNumber:null,emailVerified:!1,isAnonymous:!1,providerData:[],refreshToken:"",tenantId:null,photoURL:null,providerId:""};async function getUser(e){try{let t=(0,s.JU)(i.RZ,"users",e),n=await (0,s.QT)(t);return n.data()}catch(e){return console.error(e),null}}async function upsertUser(e,t,n){try{let r=(0,s.JU)(i.RZ,"users",e),o={...a,...n,...(0,s.QT)(r),...t};await (0,s.pl)(r,o),console.log("Updated User: ".concat(e),o)}catch(t){console.error("Error Updating User: ".concat(e),t)}}async function deleteUser(e){try{let t=(0,s.JU)(i.RZ,"users",e);await (0,s.oe)(t),console.log("Deleted User: ".concat(e))}catch(t){console.error("Error Deleting User: ".concat(e),t)}}},938:function(e,t,n){"use strict";n.d(t,{f2:function(){return useFirebase}});var s=n(88448),i=n(10618),a=n(55444),r=n(6104),o=n(4236);(0,s.Fb)(r.I8,s.a$),(0,a.createContext)({user:null});let useFirebase=()=>{let[e,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(null),c=(0,a.useMemo)(()=>n?(0,i.ad)(r.l2):null,[n]);(0,a.useEffect)(()=>{fetchAuthState()},[]);let fetchAuthState=()=>{let e=(0,s.Aj)(r.I8,async e=>{if(t(!1),l(e),e){let t=await getUser(e);t&&void 0!==t.spellCheck?localStorage.setItem("spellCheck",t.spellCheck.toString()):localStorage.setItem("spellCheck","true")}});return()=>e()},getUser=async e=>{t(!0);try{let n=(0,i.JU)(r.RZ,"users",e.uid),s=await (0,i.QT)(n);return t(!1),s.data()}catch(n){return console.error(n),t(!1),updateUser(e,{})}},updateUser=async(e,n)=>{t(!0);let s={email:e.email,emailVerified:e.emailVerified,displayName:e.displayName,isAnonymous:e.isAnonymous,phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerData:e.providerData,providerId:e.providerId,tenantId:e.tenantId,uid:e.uid,...n},a=(0,i.JU)(r.RZ,"users",s.uid);return await (0,i.pl)(a,{...(0,i.QT)(a),...s}),t(!1),s},logout=async()=>{t(!0),localStorage.clear(),n&&await r.I8.signOut()},cleverPopupLogin=async()=>{t(!0);try{let e=await (0,s.rh)(r.I8,r.DF),t=e.user;(0,o.kg)(o.Ng.AUTH.CLEVER.LOGIN_POPUP,t),t&&(await getUser(t),await updateUser(t,{authProvider:"clever"}))}catch(e){console.error(e)}},googlePopupLogin=async()=>{t(!0);try{let e=await (0,s.rh)(r.I8,r.Vv),t=e.user;if(t){let e=await getUser(t);await updateUser(t,{authProvider:"google",displayName:t.displayName,spellCheck:e.spellCheck})}}catch(e){console.error(e)}},loginClassic=async(e,n)=>{t(!0);try{await (0,s.e5)(r.I8,e,n)}catch(e){console.error(e)}},registerClassic=async(e,n,i)=>{t(!0);try{let t=await (0,s.Xb)(r.I8,n,i),a=t.user;await updateUser(a,{authProvider:"local",displayName:e})}catch(e){console.error(e)}},passwordReset=async e=>{t(!0);try{await (0,s.LS)(r.I8,e),alert("Password reset link sent!")}catch(e){console.error(e)}};return{authLoading:e,authUser:n,firestore:c,fetchAuthState,getUser,updateUser,googleTokenLogin:()=>{if(t(!0),!chrome||!chrome.identity){t(!1);return}chrome.identity.getAuthToken({interactive:!0},async function(e){if(chrome.runtime.lastError||!e){console.error(chrome.runtime.lastError),t(!1);return}if(e){let t=s.hJ.credential(null,e);try{await (0,s.sB)(r.I8,t)}catch(e){console.error("Could not log in. ",e)}}})},googlePopupLogin,cleverPopupLogin,loginClassic,registerClassic,passwordReset,logout}}},6104:function(e,t,n){"use strict";n.d(t,{DF:function(){return h},I8:function(){return c},RZ:function(){return u},Vv:function(){return d},l2:function(){return l},qe:function(){return o}});var s=n(85266),i=n(23800),a=n(88448),r=n(10618);let o={apiKey:"AIzaSyCh8dtvuhk2MmiIaYC7oojpc5U70idSaV0",authDomain:"unicorn-revision.firebaseapp.com",projectId:"unicorn-revision",storageBucket:"unicorn-revision.appspot.com",messagingSenderId:"901177621766",appId:"1:901177621766:web:4d96d6f1232d2b6ea5b287",measurementId:"G-6XBVYZD2YD"},l=(0,i.ZF)(o),c=(0,a.v0)(l),u=(0,r.ad)(l),d=new a.hJ,h=new a.O4("oidc.clever");(0,s.Gb)().then(e=>e&&(0,s.IH)(l))},73828:function(e,t,n){"use strict";var s=n(18708),i=n(23024);t.Z=function(){return(0,s.jsxs)("div",{className:"LoadingScreen",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("p",{children:"Loading..."})]})}},30137:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Screens_MainScreen}});var s,i,a=n(18708),r=n(55444),o=n(80342),l=n(53910),c=n(47394),u=n(82791),d=n(9362),h=n(72940),g=n(41544),C=n(27060),p=n(82834),f=n(73828),m=n(10618),v=n(78727),L=n(6104),y=n(56669),x=n(68571);let D=atob("c2stamZ5UmhQZDIyRHNURUxBUU9iMFlUM0JsYmtGSjVPRThoRTR6bndtRHl5YWpHMjh5"),k=new y.ZP({apiKey:x.env.OPENAI_KEY||D,organization:"org-PGtYgdSkRlmctEZXIu7nnpzW",dangerouslyAllowBrowser:!0});async function getToneEmoji(e){console.log("TONE/REQUEST");try{var t;let n=await k.completions.create({model:"text-davinci-003",prompt:"\n    Considering the following emojis mapped to sentiment:\n    Positive: \uD83D\uDC4D\n    Accusatory: \uD83D\uDC4E\n    Happy: smiley face \uD83D\uDE03\n    Sad: \uD83D\uDE22\n    Enthusiastic: \uD83D\uDE4C\n    Neutral: \uD83E\uDD37‍♀️\n    Surprised: \uD83D\uDE2E\n    Collaborative: \uD83D\uDC4F\n    Discouraging: \uD83D\uDE30\n    Insulting: \uD83D\uDE24\n    Angry: \uD83D\uDE21\n    Concerned: \uD83D\uDE1F\n    Condescending: \uD83D\uDE44\n    Confident: \uD83D\uDE0E\n    Defensive: \uD83D\uDDE3️\n    Joyful: \uD83D\uDE0D\n    Optimistic: \uD83D\uDE4F\n    Confused: \uD83E\uDD28\n    Amused: \uD83D\uDE04\n    Frustrated: \uD83D\uDE24\n    Calm: \uD83D\uDE0C\n    Anxious: \uD83D\uDE05\n    Hopeful: \uD83D\uDE0A\n    Excited: \uD83C\uDF89\n    Proud: \uD83D\uDE0A\n    Impatient: ⌛\n    Bored: \uD83D\uDE11\n    Relieved: \uD83D\uDE05\n    Loving: ❤️\n    Crying: \uD83D\uDE2D\n    Please analyze the tone and sentiment of the following text and respond with a format of <emoji> <reason>:\n\n    ".concat(e,".\n  "),temperature:1,max_tokens:250,top_p:1,frequency_penalty:0,presence_penalty:0}),s=n.choices[0].text,i=null==s?void 0:null===(t=s.match(/((\ud83c[\udde6-\uddff]){2}|([\#\*0-9]\u20e3)|(\u00a9|\u00ae|[\u2000-\u3300]|[\ud83c-\ud83e][\ud000-\udfff])((\ud83c[\udffb-\udfff])?(\ud83e[\uddb0-\uddb3])?(\ufe0f?\u200d([\u2000-\u3300]|[\ud83c-\ud83e][\ud000-\udfff])\ufe0f?)?)*)/g))||void 0===t?void 0:t[0];return{icon:i,message:s}}catch(e){return console.error("TONE/REQUEST/ERROR",e),{icon:void 0,message:null}}}let E=(0,o.cn)({key:"tone",default:{fetching:!1,icon:null,message:null}}),S=(0,o.nZ)({key:"tone.fetching",get:e=>{let{get:t}=e;return t(E).fetching}}),T=(0,o.nZ)({key:"tone.icon",get:e=>{let{get:t}=e;return t(E).icon}}),w=(0,o.nZ)({key:"tone.message",get:e=>{let{get:t}=e;return t(E).message}});var j=n(6758),M=n(59709),A=n(57405),R=n(91795);let SuggestionsView=class SuggestionsView{createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=(0,R.ZP)(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}))}update(e,t){let{state:n}=e,s=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,t);return}let i=!(null==t?void 0:t.selection.eq(e.state.selection)),a=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,a,t)}show(){var e;null===(e=this.tippy)||void 0===e||e.show()}hide(){var e;null===(e=this.tippy)||void 0===e||e.hide()}destroy(){var e,t;(null===(e=this.tippy)||void 0===e?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}constructor({editor:e,element:t,view:n,tippyOptions:s={},updateDelay:i=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=e=>{let{view:t,state:n,from:s,to:i}=e,{doc:a,selection:r}=n,{empty:o}=r,l=!a.textBetween(s,i).length&&(0,M.xh)(n.selection),c=(0,M.yw)(n,"biasMark")||(0,M.yw)(n,"languageMark"),u=this.element.contains(document.activeElement),d=t.hasFocus()||u;return!!d&&!o&&!l&&!!c&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(n.relatedTarget))||this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.handleDebouncedUpdate=(e,t)=>{let n=!(null==t?void 0:t.selection.eq(e.state.selection)),s=!(null==t?void 0:t.doc.eq(e.state.doc));(n||s)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,s,t)},this.updateDelay))},this.updateHandler=(e,t,n,s)=>{var i,a,r;let{state:o,composing:l}=e,{selection:c}=o;if(l||!t&&!n)return;this.createTooltip();let{ranges:u}=c,d=Math.min(...u.map(e=>e.$from.pos)),h=Math.max(...u.map(e=>e.$to.pos)),g=null===(i=this.shouldShow)||void 0===i?void 0:i.call(this,{editor:this.editor,view:e,state:o,oldState:s,from:d,to:h});if(!g){this.hide();return}null===(r=this.tippy)||void 0===r||r.setProps({getReferenceClientRect:(null===(a=this.tippyOptions)||void 0===a?void 0:a.getReferenceClientRect)||(()=>{if((0,M.EG)(o.selection)){let t=e.nodeDOM(d),n=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");if(n&&(t=n.firstChild),t)return t.getBoundingClientRect()}return(0,M.pr)(e,d,h)})}),this.show()},this.editor=e,this.element=t,this.view=n,this.updateDelay=i,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}};let SuggestionsPlugin=e=>new A.Sy({key:"string"==typeof e.pluginKey?new A.H$(e.pluginKey):e.pluginKey,view:t=>new SuggestionsView({view:t,...e})});var views_Ignore=function(e){let{handler:t}=e;return(0,a.jsxs)("button",{className:"action dictionary",onClick:t,children:[(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:(0,a.jsx)("path",{d:"M35.6924378,18.1776484 C45.1633388,16.6074505 54.831795,16.6074505 64.307022,18.1776484 C68.6880477,18.9023472 72.7316435,20.9798651 75.8739844,24.1243836 C79.0162223,27.264367 81.0923839,31.3147848 81.8166014,35.6993618 C82.6011361,40.4305697 82.9997361,45.2218686 82.9997361,50.0170842 C83.0115109,54.8007557 82.6292758,59.5758723 81.8567717,64.2946085 C81.1325747,68.6786701 79.0564956,72.7250681 75.9141546,75.8695867 C72.7763457,79.0140022 68.7287329,81.0916025 64.3471923,81.8163219 C59.6192608,82.6054303 54.831692,83 50.0393851,83 C45.2470783,83 40.4590975,82.6054716 35.731578,81.8163219 C31.3476683,81.1033733 27.3000555,79.033895 24.1496805,75.8974161 C21.0033226,72.760731 18.9151305,68.7183528 18.1828584,64.3337758 C16.6057139,54.8563115 16.6057139,45.1771354 18.1828584,35.6993618 C18.9070553,31.3153002 20.9831345,27.2689022 24.1254754,24.1243836 C27.2632843,20.9839879 31.3108972,18.9023678 35.6924378,18.1776484 Z M50.0393851,25.2793046 C45.6982207,25.2632254 41.3648844,25.6094544 37.0839753,26.310024 C31.5676775,27.2162324 27.2505123,31.5444291 26.3492574,37.0604267 C24.9209487,45.6442574 24.9209487,54.4010427 26.3492574,62.9809567 C27.2548383,68.5010772 31.5800376,72.8212342 37.0922153,73.7231136 C45.6701016,75.1483924 54.4208227,75.1483924 62.994795,73.7231136 C68.5070757,72.8171113 72.8242307,68.4969543 73.7295128,62.9809567 C74.4295973,58.697184 74.7715901,54.3608447 74.7598271,50.0165688 C74.7715695,45.672396 74.4295973,41.3360567 73.7295128,37.0521809 C72.824138,31.5360803 68.5069727,27.2159335 62.994795,26.310024 C58.7139889,25.6094544 54.3806525,25.2631945 50.0393851,25.2793046 Z M50.0393851,34.5557787 C52.3166244,34.5557787 54.1594073,36.3998387 54.1594073,38.6786561 L54.1594073,44.8629721 L60.3394406,44.8629721 C62.6166799,44.8629721 64.4594629,46.7070321 64.4594629,48.9858495 C64.4594629,51.2646669 62.6166799,53.1087268 60.3394406,53.1087268 L54.1594073,53.1087268 L54.1594073,59.2930429 C54.1594073,61.5718603 52.3166244,63.4159202 50.0393851,63.4159202 C47.7621458,63.4159202 45.9193629,61.5718603 45.9193629,59.2930429 L45.9193629,53.1087268 L39.7393296,53.1087268 C37.4620903,53.1087268 35.6193074,51.2646669 35.6193074,48.9858495 C35.6193074,46.7070321 37.4620903,44.8629721 39.7393296,44.8629721 L45.9193629,44.8629721 L45.9193629,38.6786561 C45.9193629,36.3998387 47.7621458,34.5557787 50.0393851,34.5557787 Z",className:"path"})}),(0,a.jsx)("span",{children:"Add to my Dictionary"})]})};let Suggestions=e=>{let{editor:t,className:n,children:s,tippyOptions:i}=e,[o,l]=(0,r.useState)(null),c="suggestions";return(0,r.useEffect)(()=>{if(!o||t.isDestroyed)return;let e=SuggestionsPlugin({pluginKey:c,editor:t,element:o,tippyOptions:i,shouldShow:null});return t.registerPlugin(e),()=>t.unregisterPlugin(c)},[t,o]),(0,a.jsx)("div",{ref:l,className:n,style:{visibility:"hidden"},children:s})};function SuggestionsModal(e){let{editor:t,match:n}=e,s={ignore:()=>console.log("@TODO: add ignore logic"),accept:e=>{t.chain().toggleBiasMark().insertContent(e.value).run()}};return(0,a.jsxs)(Suggestions,{editor:t,children:[(0,a.jsx)("header",{className:"header",children:(0,a.jsx)("div",{className:"message",children:null==n?void 0:n.message})}),(0,a.jsx)("ul",{className:"suggestions",children:null==n?void 0:n.replacements.slice(0,5).map(e=>(0,a.jsx)("li",{onClick:()=>{console.log("Suggestion clicked"),s.accept(e)},children:String(e.value)},(0,j.Z)()))}),(0,a.jsx)("footer",{className:"footer",children:(0,a.jsx)(views_Ignore,{handler:s.ignore})})]})}var b=n(85151),Revise_Revision=function(e){var t;let{revision:n,accept:s,decline:i}=e;if(!n)return null;let r=(0,a.jsx)(a.Fragment,{children:null===(t=n[0].text)||void 0===t?void 0:t.split("\n").map(e=>e.trim()&&(0,a.jsx)("p",{children:e},(0,j.Z)()))});return(0,a.jsxs)("div",{className:"Revision",children:[(0,a.jsx)("div",{className:"content",children:r}),(0,a.jsxs)("div",{className:"ButtonRow centered shrink",children:[(0,a.jsx)("button",{className:"button accept",onClick:()=>s((0,b.uS)(r)),children:"Accept Revision"}),(0,a.jsx)("button",{className:"button cancel",onClick:i,children:"Cancel"})]})]})},Revise_Rewrite=function(e){let{handler:t}=e,n=(0,o.sJ)(p.kk),s=(0,o.sJ)(p.Kp);return(0,a.jsx)("button",{className:"rewrite ".concat(n?"active fetching":""),onClick:t,children:s?(0,a.jsx)("div",{className:"counter bias",children:s}):(0,a.jsx)("svg",{viewBox:"0 0 70 68",children:(0,a.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,a.jsx)("path",{d:"M1,60.8136887 C9.89707842,62.3145438 16.2023892,62.3145438 19.9159324,60.8136887 C35.51424,54.5095207 43.4024564,35.0144928 35,15.463237 C31.1772116,6.56818174 24.231007,6.15839994 21.3955329,7.43148889 C15.1542794,10.233726 15.1629649,18.4298629 18.1706655,27.2075445 C21.6566022,37.3809114 33.4746261,45.6710531 42.3913043,42.4026571 C56.5916882,37.1975262 63.6918801,26.1762313 63.6918801,9.33877235",className:"StrokeLayer"})})})})},Revise_Reload=function(e){let{handler:t}=e,n=(0,o.sJ)(p.rD),s=(0,o.sJ)(p.DU),i=(0,o.sJ)(p.kk),r=(0,o.sJ)(p.WA),l=(0,o.sJ)(p.Kp);return(0,a.jsx)("button",{className:"reload ".concat((n||s||i)&&"active fetching"),onClick:t,children:r?(0,a.jsx)("div",{className:"counter",children:r}):l?(0,a.jsx)("div",{className:"counter bias",children:l}):(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:(0,a.jsx)("path",{d:"M27.9145771,10.7907643 C37.0817835,5.6271571 47.7765157,3.83838384 58.1248978,5.74098714 C68.4774919,7.63937851 77.8345591,13.1109965 84.5714833,21.1944415 C91.3087314,29.2816665 95,39.4742073 95,49.9997064 C95,52.4845277 92.9834587,54.501069 90.4986374,54.501069 C88.0138161,54.501069 85.9972747,52.4845277 85.9972747,49.9997064 C85.9972747,41.5791991 83.0483854,33.4241513 77.6569021,26.9572225 C72.2696307,20.4899696 64.7813634,16.1109689 56.5000658,14.592515 C48.2187681,13.0740611 39.6674751,14.5039241 32.3311612,18.6340215 C24.9948473,22.7682985 19.3379045,29.3410655 16.346356,37.2129422 C13.3553474,45.0808229 13.2203497,53.7496179 15.9582322,61.715561 C18.6962012,69.6762122 24.1424396,76.4259882 31.3436478,80.7880332 C38.544964,85.1501862 47.0454979,86.8545049 55.3732347,85.5972985 C62.1737698,84.5679358 68.5014891,81.6232908 73.6400408,77.1473078 L69.5732627,73.6710635 C68.2317097,72.5193713 67.6832951,70.6926907 68.1768467,68.9925839 C68.6704306,67.2966891 70.1132534,66.0436946 71.8640113,65.7948669 L87.6123006,63.5463455 C88.9158382,63.3607183 90.2321196,63.7530648 91.2192226,64.6221042 C92.2063904,65.4911545 92.767484,66.7483717 92.7464243,68.0645451 L92.5144011,84.6984192 C92.4890864,86.508252 91.3837686,88.1240123 89.7047214,88.8074245 C88.0298862,89.4866357 86.1104352,89.0985119 84.8321692,87.8202567 L80.2886873,83.2767748 C73.7412998,89.2419443 65.5447807,93.1610889 56.7148525,94.4945409 C46.3073954,96.0680738 35.680054,93.9376809 26.6784088,88.4871452 C17.6800034,83.032375 10.8750404,74.595344 7.44933929,64.6433151 C4.02374725,54.6915021 4.19676028,43.8536724 7.93448855,34.0161215 C11.6721963,24.1781386 18.7429428,15.9599119 27.9141451,10.7922007 L27.9145771,10.7907643 Z",className:"FillLayer"})})})},Revise_Tone=function(){let e=(0,o.sJ)(S),t=(0,o.sJ)(T),n=(0,o.sJ)(w),[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t&&(i(!1),setTimeout(()=>{i(!0)},300))},[t]),(0,a.jsxs)("button",{className:l?"active":"",onMouseOver:()=>c(!0),onMouseOut:()=>c(!1),children:[(0,a.jsx)("span",{className:"tone ".concat(e&&"fetching"),children:t&&!e?(0,a.jsx)("p",{className:s?"visible":"",children:t}):(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:(0,a.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,a.jsx)("path",{d:"M50,5 C74.6774194,5 95,24.8371613 95,50 C95,75.1628387 75.1628387,95 50,95 C24.8371613,95 5,75.1628387 5,50 C5,24.8371613 25.3225806,5 50,5 Z M50,12.2580645 C29.192,12.2580645 12.2580645,28.7065806 12.2580645,49.5145806 C12.2580645,70.3225806 29.192,87.2565161 50,87.2565161 C70.808,87.2565161 87.7419355,70.8033548 87.7419355,50 C87.7419355,29.192 70.808,12.2580645 50,12.2580645 Z M31.6144516,64.9969032 C33.0660645,63.5452903 35.483871,63.5452903 36.9354839,64.9969032 C44.1935484,72.2549677 55.8064516,72.2549677 63.0645161,64.9969032 C64.516129,63.5452903 66.9339355,63.5452903 68.3855484,64.9969032 C69.8371613,66.4485161 69.8371613,68.8663226 68.3855484,70.3179355 C63.0645161,75.6436129 56.7726452,78.0614194 50,78.0614194 C43.2273548,78.0614194 36.4547097,75.1581935 31.6144516,70.3179355 C30.1628387,68.8663226 30.1628387,66.4485161 31.6144516,64.9969032 Z M35.483871,32.580529 C38.9586839,32.580529 41.7757419,35.3930581 41.7757419,38.867871 C41.7757419,42.3426839 38.9586839,45.1597419 35.483871,45.1597419 C32.0090581,45.1597419 29.192,42.3426839 29.192,38.867871 C29.192,35.3930581 32.0090581,32.580529 35.483871,32.580529 Z M64.516129,32.580529 C67.9909419,32.580529 70.808,35.3930581 70.808,38.867871 C70.808,42.3426839 67.9909419,45.1597419 64.516129,45.1597419 C61.0413161,45.1597419 58.2242581,42.3426839 58.2242581,38.867871 C58.2242581,35.3930581 61.0413161,32.580529 64.516129,32.580529 Z",className:"FillLayer"})})})}),!n||n.length<5?null:(0,a.jsx)("div",{className:"tooltip",children:(0,a.jsx)("p",{children:n})})]})},Revise_Toolbar=e=>{let{mode:t,reload:n,rewrite:s,editor:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("aside",{className:"Toolbar ".concat(t),children:[(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsx)(Revise_Rewrite,{handler:s}),(0,a.jsx)(Revise_Reload,{handler:n}),(0,a.jsx)(Revise_Tone,{})]}),(0,a.jsx)("span",{className:"version",children:"1.1.0"})]})})},Heading=function(e){let{editor:t,level:n=1}=e;return(0,a.jsx)("button",{onClick:()=>t.chain().focus().toggleHeading({level:n}).run(),className:t.isActive("heading",{level:n})?"action active":"action",children:(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:1===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("polygon",{className:"path",points:"37.68 53.42 24.12 53.42 24.12 71 15.9 71 15.9 29 24.12 29 24.12 46.1 37.68 46.1 37.68 29 45.9 29 45.9 71 37.68 71"}),(0,a.jsx)("polygon",{className:"path",points:"56.36 64.4 65.54 64.4 65.54 38.18 57.62 44.24 54.02 39.44 67.7 29 72.98 29 72.98 64.4 81.98 64.4 81.98 71 56.36 71"})]}):2===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("polygon",{className:"path",points:"37.68 53.42 24.12 53.42 24.12 71 15.9 71 15.9 29 24.12 29 24.12 46.1 37.68 46.1 37.68 29 45.9 29 45.9 71 37.68 71"}),(0,a.jsx)("path",{className:"path",d:"M81.38,71 L54.62,71 L54.62,65.18 C55.1,64.78 55.7,64.25 56.42,63.59 C57.14,62.93 57.95,62.18 58.85,61.34 C59.75,60.5 60.7,59.58 61.7,58.58 C62.7,57.58 63.68,56.54 64.64,55.46 C66,53.94 67.19,52.56 68.21,51.32 C69.23,50.08 70.07,48.91 70.73,47.81 C71.39,46.71 71.88,45.63 72.2,44.57 C72.52,43.51 72.68,42.42 72.68,41.3 C72.68,40.5 72.5,39.72 72.14,38.96 C71.78,38.2 71.28,37.53 70.64,36.95 C70,36.37 69.23,35.91 68.33,35.57 C67.43,35.23 66.44,35.06 65.36,35.06 C63.92,35.06 62.61,35.28 61.43,35.72 C60.25,36.16 59.02,36.9 57.74,37.94 L54.62,32.42 C56.3,31.22 58.17,30.21 60.23,29.39 C62.29,28.57 64.66,28.16 67.34,28.16 C69.06,28.16 70.71,28.4 72.29,28.88 C73.87,29.36 75.27,30.07 76.49,31.01 C77.71,31.95 78.68,33.12 79.4,34.52 C80.12,35.92 80.48,37.54 80.48,39.38 C80.48,40.66 80.37,41.85 80.15,42.95 C79.93,44.05 79.59,45.15 79.13,46.25 C78.67,47.35 78.07,48.48 77.33,49.64 C76.59,50.8 75.7,52.06 74.66,53.42 C73.86,54.46 72.99,55.51 72.05,56.57 C71.11,57.63 70.18,58.64 69.26,59.6 C68.34,60.56 67.43,61.46 66.53,62.3 C65.63,63.14 64.82,63.84 64.1,64.4 L81.38,64.4 L81.38,71 Z"})]}):3===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("polygon",{className:"path",points:"37.68 53.42 24.12 53.42 24.12 71 15.9 71 15.9 29 24.12 29 24.12 46.1 37.68 46.1 37.68 29 45.9 29 45.9 71 37.68 71"}),(0,a.jsx)("path",{className:"path",d:"M64.88,65.24 C66.2,65.24 67.41,65.07 68.51,64.73 C69.61,64.39 70.55,63.91 71.33,63.29 C72.11,62.67 72.72,61.95 73.16,61.13 C73.6,60.31 73.82,59.42 73.82,58.46 C73.82,57.26 73.57,56.25 73.07,55.43 C72.57,54.61 71.88,53.96 71,53.48 C70.12,53 69.06,52.66 67.82,52.46 C66.58,52.26 65.24,52.16 63.8,52.16 L60.44,52.16 L60.44,47.9 L70.52,35.6 L55.34,35.6 L55.34,29 L79.82,29 L79.82,34.46 L69.26,46.52 L70.64,46.52 C72.04,46.52 73.4,46.76 74.72,47.24 C76.04,47.72 77.21,48.44 78.23,49.4 C79.25,50.36 80.07,51.56 80.69,53 C81.31,54.44 81.62,56.1 81.62,57.98 C81.62,60.26 81.15,62.26 80.21,63.98 C79.27,65.7 78.03,67.15 76.49,68.33 C74.95,69.51 73.18,70.39 71.18,70.97 C69.18,71.55 67.12,71.84 65,71.84 C63.2,71.84 61.4,71.68 59.6,71.36 C57.8,71.04 56.06,70.54 54.38,69.86 L56.48,63.38 C56.84,63.58 57.33,63.78 57.95,63.98 C58.57,64.18 59.27,64.38 60.05,64.58 C60.83,64.78 61.63,64.94 62.45,65.06 C63.27,65.18 64.08,65.24 64.88,65.24 Z"})]}):void 0})})},icons_List=function(e){let{editor:t}=e;return(0,a.jsx)("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:t.isActive("bulletList")?"action active":"action",children:(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:(0,a.jsx)("path",{d:"M25.2,24 L18.8,24 C18.4,24 18,24.4 18,24.8 L18,31 C18,31.6 18.4,32 18.8,32 L25,32 C25.6,32 26,31.6 26,31.2 L26,24.8 C26,24.4 25.6,24 25.2,24 Z M25.2,46 L18.8,46 C18.4,46 18,46.4 18,46.8 L18,53 C18,53.6 18.4,54 18.8,54 L25,54 C25.6,54 26,53.6 26,53.2 L26,46.8 C26,46.4 25.6,46 25.2,46 Z M25.2,68 L18.8,68 C18.4,68 18,68.4 18,68.8 L18,75 C18,75.6 18.4,76 18.8,76 L25,76 C25.6,76 26,75.6 26,75.2 L26,68.8 C26,68.4 25.6,68 25.2,68 Z M81.2456928,24 L36.9233815,24 C36.4616907,24 36,24.4102564 36,24.8205128 L36,31.1794872 C36,31.5897436 36.4616907,32 36.9233815,32 L81.0152168,32 C81.4769075,32 81.9385983,31.5897436 81.9385983,31.1794872 L81.9385983,24.8205128 C82.1694437,24.4102564 81.7077529,24 81.2460622,24 L81.2456928,24 Z M81.2456928,46 L36.9233815,46 C36.4616907,46 36,46.4102564 36,46.8205128 L36,53.1794872 C36,53.5897436 36.4616907,54 36.9233815,54 L81.0152168,54 C81.4769075,54 81.9385983,53.5897436 81.9385983,53.1794872 L81.9385983,46.8205128 C82.1694437,46.4102564 81.7077529,46 81.2460622,46 L81.2456928,46 Z M81.2456928,68 L36.9233815,68 C36.4616907,68 36,68.4102564 36,68.8205128 L36,75.1794872 C36,75.5897436 36.4616907,76 36.9233815,76 L81.0152168,76 C81.4769075,76 81.9385983,75.5897436 81.9385983,75.1794872 L81.9385983,68.8205128 C82.1694437,68.4102564 81.7077529,68 81.2460622,68 L81.2456928,68 Z",className:"path"})})})},Link=function(e){let{editor:t}=e,n=(0,r.useCallback)(()=>{let e=t.getAttributes("link").href,n=window.prompt("URL",e);if(null!==n){if(""===n){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:n}).run()}},[t]);return(0,a.jsx)("button",{className:t.isActive("link")?"action active":"action",onClick:n,children:(0,a.jsx)("svg",{viewBox:"0 0 100 100",children:(0,a.jsx)("path",{d:"M32.9239446,80.0034253 C29.6125378,80.0034253 26.3011311,78.7453391 23.778667,76.2229578 C18.7404443,71.1815066 18.7404443,62.9740194 23.778667,57.9290912 L31.0934817,50.6110478 C32.105696,49.5988335 33.7419448,49.5988335 34.7541591,50.6110478 C35.7663734,51.623262 35.7663734,53.2595109 34.7541591,54.2717252 L27.4393443,61.5897685 C24.4157816,64.6133313 24.4157816,69.541698 27.4393443,72.5654263 C30.4629071,75.595529 35.3945024,75.5857604 38.4183135,72.5654263 L53.0514199,57.9290084 C54.5163035,56.4641248 55.3247835,54.5141201 55.3247835,52.4412623 C55.3247835,50.3684044 54.5163366,48.4183998 53.0514199,46.9535162 C52.0392057,45.947842 52.0392057,44.3050531 53.0514199,43.2928388 C54.0636342,42.2806246 55.6998831,42.2806246 56.7120973,43.2928388 C59.1535975,45.734339 60.5020852,48.9843192 60.5020852,52.4381165 C60.5020852,55.8918309 59.1535975,59.1418111 56.7120973,61.5867055 L42.0789908,76.2231234 C39.5566095,78.7455047 36.2452028,80.0034253 32.9304018,80.0034253 L32.9239446,80.0034253 Z M46.9485801,56.7099968 C47.9607943,55.6977825 47.9607943,54.0615336 46.9485801,53.0493194 C45.4836965,51.5844358 44.6752165,49.6344311 44.6752165,47.5615733 C44.6752165,45.4887154 45.4836634,43.5387108 46.9485801,42.0738272 L61.5816865,27.4374093 C64.6020206,24.4170752 69.533616,24.4073066 72.5606557,27.4374093 C75.5842184,30.4609721 75.5842184,35.3893387 72.5606557,38.413067 L65.2458409,45.7311104 C64.2336266,46.7433247 64.2336266,48.3795735 65.2458409,49.3917878 C66.2580552,50.4040021 67.894304,50.4040021 68.9065183,49.3917878 L76.221333,42.0737444 C81.2595557,37.0322932 81.2595557,28.824806 76.221333,23.7798778 C71.1701132,18.7384266 62.9690832,18.7416552 57.924155,23.7798778 L43.2910485,38.4162957 C40.8495483,40.8577959 39.5010607,44.107776 39.5010607,47.5648847 C39.5010607,51.0218278 40.8495483,54.2685793 43.2910485,56.7101623 C43.7955165,57.2146386 44.458485,57.4701053 45.1181172,57.4701053 C45.7810443,57.4701053 46.4440045,57.2178672 46.9451859,56.7101623 L46.9485801,56.7099968 Z",className:"path"})})})},icons_Bold=function(e){let{editor:t}=e;return(0,a.jsx)("button",{className:t.isActive("bold")?"action active":"action",onClick:()=>{t.chain().focus().toggleBold().run()},children:(0,a.jsxs)("svg",{viewBox:"0 0 100 100",children:[(0,a.jsx)("g",{transform:"translate(37.45, 28.52)",children:(0,a.jsx)("path",{d:"M25.32,10.08 C25.32,11.08 25.16,12.1 24.84,13.14 C24.52,14.18 24.04,15.15 23.4,16.05 C22.76,16.95 21.94,17.74 20.94,18.42 C19.94,19.1 18.76,19.62 17.4,19.98 L17.4,20.22 C18.6,20.42 19.75,20.76 20.85,21.24 C21.95,21.72 22.92,22.38 23.76,23.22 C24.6,24.06 25.28,25.08 25.8,26.28 C26.32,27.48 26.58,28.9 26.58,30.54 C26.58,32.7 26.13,34.57 25.23,36.15 C24.33,37.73 23.15,39.02 21.69,40.02 C20.23,41.02 18.56,41.76 16.68,42.24 C14.8,42.72 12.88,42.96 10.92,42.96 C10.24,42.96 9.44,42.96 8.52,42.96 C7.6,42.96 6.64,42.93 5.64,42.87 C4.64,42.81 3.64,42.73 2.64,42.63 C1.64,42.53 0.76,42.38 0,42.18 L0,0.84 C1.48,0.6 3.2,0.4 5.16,0.24 C7.12,0.08 9.26,0 11.58,0 C13.14,0 14.73,0.13 16.35,0.39 C17.97,0.65 19.44,1.15 20.76,1.89 C22.08,2.63 23.17,3.66 24.03,4.98 C24.89,6.3 25.32,8 25.32,10.08 Z M11.4,38.64 C12.68,38.64 13.92,38.48 15.12,38.16 C16.32,37.84 17.38,37.36 18.3,36.72 C19.22,36.08 19.95,35.28 20.49,34.32 C21.03,33.36 21.3,32.22 21.3,30.9 C21.3,29.26 20.97,27.94 20.31,26.94 C19.65,25.94 18.79,25.16 17.73,24.6 C16.67,24.04 15.48,23.66 14.16,23.46 C12.84,23.26 11.52,23.16 10.2,23.16 L4.98,23.16 L4.98,38.22 C5.26,38.3 5.66,38.36 6.18,38.4 C6.7,38.44 7.26,38.48 7.86,38.52 C8.46,38.56 9.08,38.59 9.72,38.61 C10.36,38.63 10.92,38.64 11.4,38.64 Z M8.1,18.96 C8.78,18.96 9.6,18.94 10.56,18.9 C11.52,18.86 12.32,18.8 12.96,18.72 C13.92,18.4 14.82,18.01 15.66,17.55 C16.5,17.09 17.25,16.54 17.91,15.9 C18.57,15.26 19.09,14.54 19.47,13.74 C19.85,12.94 20.04,12.06 20.04,11.1 C20.04,9.78 19.79,8.68 19.29,7.8 C18.79,6.92 18.12,6.22 17.28,5.7 C16.44,5.18 15.48,4.82 14.4,4.62 C13.32,4.42 12.22,4.32 11.1,4.32 C9.78,4.32 8.57,4.35 7.47,4.41 C6.37,4.47 5.54,4.56 4.98,4.68 L4.98,18.96 L8.1,18.96 Z",className:"path"})}),(0,a.jsx)("path",{d:"M82,18 L82,82 L18,82 L18,18 L82,18 Z M78,22 L22,22 L22,78 L78,78 L78,22 Z",className:"path"})]})})},icons_Italic=function(e){let{editor:t}=e;return(0,a.jsx)("button",{className:t.isActive("italic")?"action active":"action",onClick:()=>{t.chain().focus().toggleBold().run()},children:(0,a.jsxs)("svg",{viewBox:"0 0 100 100",children:[(0,a.jsx)("g",{id:"I",transform:"translate(35.05, 29)",children:(0,a.jsx)("polygon",{points:"0 0 28.8 0 28.8 4.44 16.86 4.44 16.86 37.56 28.8 37.56 28.8 42 0 42 0 37.56 11.88 37.56 11.88 4.44 0 4.44",className:"path"})}),(0,a.jsx)("path",{d:"M82,18 L82,82 L18,82 L18,18 L82,18 Z M78,22 L22,22 L22,78 L78,78 L78,22 Z",className:"path"})]})})},format=function(e){let{editor:t}=e;return(0,a.jsxs)("nav",{className:"formatting",children:[(0,a.jsx)(Heading,{level:1,editor:t}),(0,a.jsx)(Heading,{level:2,editor:t}),(0,a.jsx)(Heading,{level:3,editor:t}),(0,a.jsx)(icons_List,{editor:t}),(0,a.jsx)(Link,{editor:t}),(0,a.jsx)(icons_Bold,{editor:t}),(0,a.jsx)(icons_Italic,{editor:t})]})},N=n(938),I=n(95225),U=n(22135),Revise_Scribe=function(e){let{editor:t,match:n,mode:s,handleKeyDown:i}=e,{authUser:c}=(0,N.f2)(),[u,d]=(0,o.FV)(p.ii),[h,g]=(0,o.FV)(E),[C,f]=(0,r.useState)(Date.now()),[y,x]=(0,r.useState)(),{status:D,data:S}=(0,I.aF)(),[T,w]=(0,r.useState)(U.at),_fetchRevision=async e=>{d({...u,fetchingRevision:!0});let t=await k.completions.create({model:"text-davinci-003",prompt:"\n    Remove all opinions, subjective language, and judgments from the following sentences, and rewrite them using objective language with no opinions, only observable actions and words and statements of events that have taken place:\n\n".concat(e),temperature:1,max_tokens:1500,top_p:1,frequency_penalty:0,presence_penalty:0}).then(e=>(console.log("_fetchRevision Response",e),e.choices)).catch(console.log);x(t),d({...u,fetchingRevision:!1})};return t?((0,r.useEffect)(()=>{"success"===D&&S&&(0,U.$8)(S.uid).then(e=>{e&&w({...T,...e.scribe})})},[D,S]),(0,r.useEffect)(()=>{let fetchAndProcessData=async(e,t)=>{let n=(0,m.IO)(e);try{let e=await (0,m.PL)(n);e.size>0&&e.forEach(async e=>{let n=e.data()[t];n.forEach(e=>{v.DB.suggestion.add({category:e.category,type:e.type,input:e.input,date:e.date})})})}catch(e){console.error("Error getting ".concat(t,": "),e)}};if(c){let e=(0,m.hJ)(L.RZ,"users"),t=(0,m.JU)(e,c.uid),n=(0,m.hJ)(t,"ignorelist"),s=(0,m.IO)(n);(0,m.PL)(s).then(e=>{e.size>0&&(0,m.PL)(n).then(e=>{v.DB.dictionary.clear(),e.forEach(async e=>{let t=e.data().data;t.forEach(e=>{v.DB.dictionary.add({value:e.Value,timestamp:e.timestamp})})})}).catch(e=>{console.error("Error getting documents: ",e)})}).catch(e=>{console.error("Error getting ignore:",e)});let i=(0,m.hJ)(t,"bias");fetchAndProcessData(i,"bias");let a=(0,m.hJ)(t,"language");fetchAndProcessData(a,"language")}},[n,c]),(0,r.useEffect)(()=>{let e=t.getText();if(e.length<250||Date.now()-C<15e3)return g({...h,fetching:!1,icon:null});g({...h,fetching:!0}),f(Date.now()),async function(){let{icon:t,message:n}=await getToneEmoji(e);g({...h,fetching:!1,icon:t,message:n})}()},[t.getText()]),(0,a.jsxs)("div",{className:"Main",children:[(0,a.jsx)(SuggestionsModal,{editor:t,match:n}),T.formatting&&(0,a.jsx)(format,{editor:t}),y?(0,a.jsx)(Revise_Revision,{accept:e=>{t.commands.setContent(e),x()},decline:()=>x(),revision:y}):(0,a.jsx)("div",{children:(0,a.jsx)(l.kg,{editor:t,onKeyDown:i&&(e=>i(e,t))})}),(0,a.jsx)(Revise_Toolbar,{mode:s,reload:()=>t.commands.proofread(),rewrite:()=>_fetchRevision(t.getText()),editor:t})]})):null},Z=n(4236);async function apiRequest(e,t){console.log("BIAS/REQUEST/".concat(e.toUpperCase()),{body:t});let n=t?{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:t})}:void 0,s=await fetch("".concat("https://revisioned.herokuapp.com","/").concat(e),n);if(!s.ok)return console.error("API request failed with status: ".concat(s.statusText)),null;let i=await s.json();return console.log("BIAS/RESPONSE/".concat(e.toUpperCase()),i),i}(s=i||(i={})).CHECK="check",s.CATEGORIES="api/v1/categories",s.COMPLETIONS="api/v1/completions",s.CLASSIFICATIONS="api/v1/classifications";let fetchBiases=async e=>{let t=/(?:(?:https?|ftp):\/\/)?[\w/\-?=%.]+\.[\w/\-?=%.]+/;if(t.test(e)){let n=e.match(t);if(!n)return{};{let t=e.indexOf(n[0]),s=e.slice(t+n[0].length).trim();if(!s)return{};e=s}}let n=await apiRequest("check",e);return console.log("fetchBiases",n,L.RZ),n};async function fetchLanguage(e){return await fetch("https://language-tool.herokuapp.com/v2/check",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"text=".concat(encodeURIComponent(e),"&language=auto&enabledOnly=false")}).then(e=>e.json())}async function getLanguageMarks(e,t){(0,Z.kg)(Z.sz.LANGUAGE.FETCHING,!0);let n=await fetchLanguage(e);n.matches.map(n=>{let{sentence:s,shortMessage:i,rule:a,replacements:r,offset:o,length:l}=n,c=RegExp((0,M.Ov)(s),"gid").exec(e);if(!c||!c[0])return;let u=o+1,d=o+l+1;return(0,Z.kg)(Z.sz.LANGUAGE.RESULT,{from:u,to:d,message:i,replacements:r}),t.view.dispatch(t.state.tr.addMark(u,d,t.state.schema.marks.languageMark.create({from:u,to:d,message:i,replacements:r}))),{category:"language",type:a.issueType,input:s,date:Date.now()}})}async function getBiasMarks(e,t){(0,Z.kg)(Z.sz.BIAS.FETCHING,!0);let n=await fetchBiases(e);if(!n||!n.results)return;let s=n.results.map(n=>{let{input:s,biases:i,replacements:a}=n,r=i[0].name,o=RegExp((0,M.Ov)(s),"gid").exec(e);if("none"===r||!o||!o[0])return;let l=o.index+1,c=o.index+s.length+1,u="This phrase may contain ".concat(r.replace("potential ","")," bias. Here are some examples of alternative statements:"),d=a.map(e=>({value:e}));return(0,Z.kg)(Z.sz.BIAS.RESULT,{from:l,to:c,message:u,suggestions:d}),t.view.dispatch(t.state.tr.addMark(l,c,t.state.schema.marks.biasMark.create({from:l,to:c,message:u,replacements:d}))),{category:"bias",type:r,input:s,date:Date.now()}}).filter(e=>void 0!==e);s.map(e=>(0,U.kK)(e))}async function proof(e,t){let n=e.getText();t.fetching||n.length<150||Date.now()-t.lastCheckedAt<1e4||t.fetching||(t.fetching=!0,await getLanguageMarks(n,e),await getBiasMarks(n,e),t.fetching=!1)}let H=M.hj.create({name:"bias",addStorage:()=>({fetching:!1,match:null,lastCheckedAt:Date.now()}),onUpdate(){proof(this.editor,this.storage)},addCommands(){return{proofread:()=>()=>(proof(this.editor,this.storage),!0)}},addProseMirrorPlugins:()=>[new A.Sy({key:new A.H$("bias"),props:{handleClick(e,t,n){var s,i,a,r,o,l;let c=null===(s=e.state.doc.nodeAt(t))||void 0===s?void 0:s.marks.find(e=>"biasMark"===e.type.name),u=null===(i=e.state.doc.nodeAt(t))||void 0===i?void 0:i.marks.find(e=>"languageMark"===e.type.name),d=u||c;if(!d)return;let h=null===(a=d.attrs)||void 0===a?void 0:a.message,g=(null===(r=d.attrs)||void 0===r?void 0:r.replacements)||[],C=(null===(o=d.attrs)||void 0===o?void 0:o.from)||-1,p=(null===(l=d.attrs)||void 0===l?void 0:l.to)||-1;e.dispatch(e.state.tr.setMeta(Z.sz.BIAS.MATCH,{message:h,replacements:g,from:C,to:p})),e.dispatch(e.state.tr.setSelection(A.Bs.create(e.state.doc,C,p)))}}})]}),P=M.vc.create({name:"biasMark",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({class:{default:"bias",renderHTML:e=>({class:e.class})},message:{default:null,renderHTML:e=>({"data-message":e.message})},replacements:{default:[],renderHTML:e=>({"data-replacements":JSON.stringify(e.replacements)})},from:{default:-1,renderHTML:e=>({"data-from":e.from})},to:{default:-1,renderHTML:e=>({"data-from":e.from})}}),parseHTML:()=>[{tag:"mark"}],renderHTML(e){let{HTMLAttributes:t}=e;return["mark",(0,M.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBiasMark:e=>t=>{let{commands:n}=t;return n.setMark(this.name,e)},toggleBiasMark:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},unsetBiasMark:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}}}),B=M.vc.create({name:"languageMark",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({class:{default:"language",renderHTML:e=>({class:e.class})},message:{default:null,renderHTML:e=>({"data-message":e.message})},replacements:{default:[],renderHTML:e=>({"data-replacements":JSON.stringify(e.replacements)})},from:{default:-1,renderHTML:e=>({"data-from":e.from})},to:{default:-1,renderHTML:e=>({"data-from":e.from})}}),parseHTML:()=>[{tag:"mark"}],renderHTML(e){let{HTMLAttributes:t}=e;return["mark",(0,M.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setLanguageMark:e=>t=>{let{commands:n}=t;return n.setMark(this.name,e)},toggleLanguageMark:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},unsetLanguageMark:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}}});var Screens_MainScreen=function(e){let{mode:t,className:s,onUpdate:i,content:m,handleKeyDown:v}=e;"embedded"===t&&n(3138);let[L,y]="embedded"===t?[null,null]:(0,o.FV)(p.ii),[x,D]=(0,r.useState)(null),k=(0,l.jE)({autofocus:"start",content:m,onUpdate(e){let{editor:t}=e;i&&i(t.getHTML())},onTransaction(e){let{editor:t,transaction:n}=e,s=n.getMeta(Z.sz.BIAS.MATCH),i=t.extensionStorage.bias.fetching;if(y&&y({...L,fetchingBias:i}),t.extensionStorage.bias.fetching||!s)return;let a=document.querySelectorAll("span.language").length,r=document.querySelectorAll("mark.bias").length;y&&y({...L,fetchingBias:i,spellingCount:a,biasCount:r}),setTimeout(()=>D(s))},extensions:[c.Z,C.ZP,g.ZP,u.Z.configure({validate:e=>/^https?:\/\//.test(e)}),d.ZP,h.Z,P,B,H]}),E=k?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Revise_Scribe,{editor:k,match:x,mode:t,handleKeyDown:v})}):(0,a.jsx)(f.Z,{});return"embedded"===t?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.Wh,{children:(0,a.jsx)(r.StrictMode,{children:(0,a.jsx)("div",{id:"RevisionApp",className:s,children:E})})})}):E}},23024:function(e,t,n){"use strict";var s=n(18708);t.Z=function(){return(0,s.jsxs)("svg",{className:"Logo",viewBox:"21 17 158 27",children:[(0,s.jsx)("path",{d:"M33.4293956,20.9189384 C34.5778162,20.9189384 36.0134141,21.0419732 37.4899755,21.9444685 L35.8083081,26.7434011 C34.7829223,25.8821578 33.5524304,25.5949805 32.3217943,25.5949805 C28.4250685,25.5949805 26.8664359,27.891966 26.3742968,29.6557046 L26.3742968,41.8378768 L21.3291504,41.8378768 L21.3291504,21.3291504 L27.3996827,21.3291504 L26.2922256,28.2678494 C27.2356844,25.8068657 29.1224578,20.9189384 33.4293956,20.9189384 M72.7876821,21.3291504 L78.6531083,39.1374585 L84.5186788,21.3291504 L90.4252128,21.3291504 L81.032165,41.8378768 L76.2330881,41.8378768 L66.5528631,21.3291504 L72.7876821,21.3291504 M93.2949661,41.8378768 L98.2990048,41.8378768 L98.2990048,21.3291504 L93.2949661,21.3291504 L93.2949661,41.8378768 Z M111.368383,39.8634069 C114.159527,39.8634069 115.264965,38.0232223 115.264965,36.3826626 C115.264965,34.8238858 114.403721,34.0036059 111.163277,33.2242896 C106.856339,32.157796 103.000721,30.9273042 103.000721,26.7434011 C103.000721,23.0108178 106.405164,20.9189384 111.327275,20.9189384 C115.470071,20.9189384 118.423338,22.4777153 119.817972,25.348911 L116.044281,27.2356844 C115.264965,25.4719458 114.449589,23.1435165 111.368383,23.1435165 C109.009087,23.1435165 108.004904,24.7745565 108.004904,26.1691908 C108.004904,27.6868599 108.743257,28.7122458 112.311698,29.4096351 C115.675177,30.0659166 120.064042,31.2964085 120.064042,35.7673446 C120.064042,40.1562094 115.798211,42.2480889 111.614308,42.2480889 C106.774268,42.2480889 103.493004,39.9920669 101.31891,36.7108034 L105.133708,34.8238858 C105.871917,36.7108034 107.050483,39.8634069 111.368383,39.8634069 M123.954998,41.8378768 L128.959181,41.8378768 L128.959181,21.3291504 L123.954998,21.3291504 L123.954998,41.8378768 Z M173.529497,41.8720612 L173.529497,30.6333478 C173.529497,26.1213039 172.626569,23.9474975 169.551421,23.9474975 C166.187797,23.9474975 164.505986,27.3929035 164.094908,29.7308524 L164.094908,41.8720612 L159.091302,41.8720612 L159.091302,21.3633348 L164.997836,21.3633348 L164.094908,28.589211 C164.546372,26.5382951 166.639262,20.9531227 171.889514,20.9531227 C176.114236,20.9531227 178.533103,23.988461 178.533103,29.0336074 L178.533103,41.8720612 L173.529497,41.8720612 M138.194288,31.4964662 C138.113515,36.0494735 140.093033,39.8035482 144.172941,40.131689 C147.526323,40.131689 149.586038,36.2955431 149.586038,31.4964662 C149.586038,26.9436031 147.526323,23.1797202 143.849849,23.1797202 C140.294966,23.1797202 138.194288,26.9436031 138.194288,31.4964662 Z M154.555027,31.4964662 C154.555027,37.6492139 150.434155,42.2841483 143.930622,42.2841483 C136.982403,42.2841483 133.225588,37.6492139 133.225588,31.4964662 C133.225588,25.5489687 136.982403,20.9549978 143.769075,20.9549978 C150.434155,20.9549978 154.555027,25.5489687 154.555027,31.4964662 L154.555027,31.4964662 Z",id:"Combined-Shape",fill:"#4E4C48"}),(0,s.jsx)("path",{d:"M37,40.5705286 C40.3945456,41.1431571 42.8002415,41.1431571 44.2170877,40.5705286 C50.1683859,38.1652687 53.1780155,30.7272358 49.9721854,23.2677501 C48.5136583,19.8739764 45.8634391,19.7176304 44.7816069,20.2033582 C42.4003511,21.2725094 42.4036649,24.3996213 43.5512076,27.7486129 C44.8812139,31.6301071 49.3902021,34.7930852 52.7922257,33.5460781 C58.2101673,31.5601392 60.919138,27.3551309 60.919138,20.9310533",className:"path",stroke:"#E05845",strokeWidth:"5",fill:"none"})]})}},3138:function(){}}]);