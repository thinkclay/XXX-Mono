import { useCallback } from 'react'
import { Editor } from '@tiptap/react'

interface Props {
  editor: Editor
}

function Image({ editor }: Props) {
  const handler = useCallback(() => {
    const previousUrl = editor.getAttributes('link').href
    const href = window.prompt('URL', previousUrl)
    // cancelled
    if (href === null) {
      return
    }

    // empty
    if (href === '') {
      editor.chain().focus().extendMarkRange('link').unsetLink().run()
      return
    }

    // update link
    editor.chain().focus().extendMarkRange('link').setLink({ href }).run()
  }, [editor])

  return (
    <button className={editor.isActive('link') ? 'action active' : 'action'} onClick={handler}>
      <svg viewBox="0 0 100 100">
        <path
          d="M32.9239446,80.0034253 C29.6125378,80.0034253 26.3011311,78.7453391 23.778667,76.2229578 C18.7404443,71.1815066 18.7404443,62.9740194 23.778667,57.9290912 L31.0934817,50.6110478 C32.105696,49.5988335 33.7419448,49.5988335 34.7541591,50.6110478 C35.7663734,51.623262 35.7663734,53.2595109 34.7541591,54.2717252 L27.4393443,61.5897685 C24.4157816,64.6133313 24.4157816,69.541698 27.4393443,72.5654263 C30.4629071,75.595529 35.3945024,75.5857604 38.4183135,72.5654263 L53.0514199,57.9290084 C54.5163035,56.4641248 55.3247835,54.5141201 55.3247835,52.4412623 C55.3247835,50.3684044 54.5163366,48.4183998 53.0514199,46.9535162 C52.0392057,45.947842 52.0392057,44.3050531 53.0514199,43.2928388 C54.0636342,42.2806246 55.6998831,42.2806246 56.7120973,43.2928388 C59.1535975,45.734339 60.5020852,48.9843192 60.5020852,52.4381165 C60.5020852,55.8918309 59.1535975,59.1418111 56.7120973,61.5867055 L42.0789908,76.2231234 C39.5566095,78.7455047 36.2452028,80.0034253 32.9304018,80.0034253 L32.9239446,80.0034253 Z M46.9485801,56.7099968 C47.9607943,55.6977825 47.9607943,54.0615336 46.9485801,53.0493194 C45.4836965,51.5844358 44.6752165,49.6344311 44.6752165,47.5615733 C44.6752165,45.4887154 45.4836634,43.5387108 46.9485801,42.0738272 L61.5816865,27.4374093 C64.6020206,24.4170752 69.533616,24.4073066 72.5606557,27.4374093 C75.5842184,30.4609721 75.5842184,35.3893387 72.5606557,38.413067 L65.2458409,45.7311104 C64.2336266,46.7433247 64.2336266,48.3795735 65.2458409,49.3917878 C66.2580552,50.4040021 67.894304,50.4040021 68.9065183,49.3917878 L76.221333,42.0737444 C81.2595557,37.0322932 81.2595557,28.824806 76.221333,23.7798778 C71.1701132,18.7384266 62.9690832,18.7416552 57.924155,23.7798778 L43.2910485,38.4162957 C40.8495483,40.8577959 39.5010607,44.107776 39.5010607,47.5648847 C39.5010607,51.0218278 40.8495483,54.2685793 43.2910485,56.7101623 C43.7955165,57.2146386 44.458485,57.4701053 45.1181172,57.4701053 C45.7810443,57.4701053 46.4440045,57.2178672 46.9451859,56.7101623 L46.9485801,56.7099968 Z"
          className="path"
        ></path>
      </svg>
    </button>
  )
}

export default Image
